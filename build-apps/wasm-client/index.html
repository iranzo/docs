<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><meta name=description content="How to integrate the Nym webassembly client into your own applications to enable strong privacy for your users"><meta name=author content="Nym Team"><link rel=icon href=/docs/images/favicon.png type=image/png><title>Webassembly client :: Nym Docs</title><link href=/docs/css/nucleus.css?1620933932 rel=stylesheet><link href=/docs/css/fontawesome-all.min.css?1620933932 rel=stylesheet><link href=/docs/css/hybrid.css?1620933932 rel=stylesheet><link href=/docs/css/featherlight.min.css?1620933932 rel=stylesheet><link href=/docs/css/perfect-scrollbar.min.css?1620933932 rel=stylesheet><link href=/docs/css/auto-complete.css?1620933932 rel=stylesheet><link href=/docs/css/atom-one-dark-reasonable.css?1620933932 rel=stylesheet><link href=/docs/css/theme.css?1620933932 rel=stylesheet><link href=/docs/css/hugo-theme.css?1620933932 rel=stylesheet><link href=/docs/css/theme-green.css?1620933932 rel=stylesheet><script src=/docs/js/jquery-3.3.1.min.js?1620933932></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=/docs/build-apps/wasm-client/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/docs><img width=40px height=10px src=/docs/images/nym-logo.svg alt="Nym Logo"></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/docs/js/lunr.min.js?1620933932></script><script type=text/javascript src=/docs/js/auto-complete.js?1620933932></script><script type=text/javascript>var baseurl="https://nymtech.net/docs/"</script><script type=text/javascript src=/docs/js/search.js?1620933932></script></div><div class=highlightable><ul class=topics><li data-nav-id=/docs/overview/ title=Overview class=dd-item><a href=/docs/overview/>Overview</a><ul><li data-nav-id=/docs/overview/nym-platform/ title="The Nym Platform" class=dd-item><a href=/docs/overview/nym-platform/>The Nym Platform</a></li><li data-nav-id=/docs/overview/network-privacy/ title="Network Privacy" class=dd-item><a href=/docs/overview/network-privacy/>Network Privacy</a></li><li data-nav-id=/docs/overview/private-access-control/ title=Coconut class=dd-item><a href=/docs/overview/private-access-control/>Coconut</a></li><li data-nav-id=/docs/overview/links/ title=Links class=dd-item><a href=/docs/overview/links/>Links</a></li></ul></li><li data-nav-id=/docs/run-nym-nodes/ title="Run Nym Nodes" class=dd-item><a href=/docs/run-nym-nodes/>Run Nym Nodes</a><ul><li data-nav-id=/docs/run-nym-nodes/incentives/ title=Incentives class=dd-item><a href=/docs/run-nym-nodes/incentives/>Incentives</a></li><li data-nav-id=/docs/run-nym-nodes/build-nym/ title="Building Nym" class=dd-item><a href=/docs/run-nym-nodes/build-nym/>Building Nym</a></li><li data-nav-id=/docs/run-nym-nodes/mixnodes/ title=Mixnodes class=dd-item><a href=/docs/run-nym-nodes/mixnodes/>Mixnodes</a></li><li data-nav-id=/docs/run-nym-nodes/validators/ title=Validators class=dd-item><a href=/docs/run-nym-nodes/validators/>Validators</a></li><li data-nav-id=/docs/run-nym-nodes/requester/ title=Requesters class=dd-item><a href=/docs/run-nym-nodes/requester/>Requesters</a></li><li data-nav-id=/docs/run-nym-nodes/gateways/ title=Gateways class=dd-item><a href=/docs/run-nym-nodes/gateways/>Gateways</a></li><li data-nav-id=/docs/run-nym-nodes/troubleshooting/ title="Mixnode Troubleshooting FAQ" class=dd-item><a href=/docs/run-nym-nodes/troubleshooting/>Mixnode Troubleshooting FAQ</a></li></ul></li><li data-nav-id=/docs/use-apps/ title="Use Apps" class=dd-item><a href=/docs/use-apps/>Use Apps</a><ul><li data-nav-id=/docs/use-apps/blockstream-green/ title="Blockstream Green" class=dd-item><a href=/docs/use-apps/blockstream-green/>Blockstream Green</a></li><li data-nav-id=/docs/use-apps/electrum/ title=Electrum class=dd-item><a href=/docs/use-apps/electrum/>Electrum</a></li><li data-nav-id=/docs/use-apps/keybase/ title=KeyBase class=dd-item><a href=/docs/use-apps/keybase/>KeyBase</a></li></ul></li><li data-nav-id=/docs/build-apps/ title="Build Apps" class="dd-item
parent"><a href=/docs/build-apps/>Build Apps</a><ul><li data-nav-id=/docs/build-apps/choose-a-client/ title="Choose a client" class=dd-item><a href=/docs/build-apps/choose-a-client/>Choose a client</a></li><li data-nav-id=/docs/build-apps/websocket-client/ title="Websocket client" class=dd-item><a href=/docs/build-apps/websocket-client/>Websocket client</a></li><li data-nav-id=/docs/build-apps/wasm-client/ title="Webassembly client" class="dd-item active"><a href=/docs/build-apps/wasm-client/>Webassembly client</a></li><li data-nav-id=/docs/build-apps/demos/ title=Demos class=dd-item><a href=/docs/build-apps/demos/>Demos</a></li></ul></li><li data-nav-id=/docs/community/ title=Community class=dd-item><a href=/docs/community/>Community</a><ul><li data-nav-id=/docs/community/code-of-conduct/ title="Code of Conduct" class=dd-item><a href=/docs/community/code-of-conduct/>Code of Conduct</a></li><li data-nav-id=/docs/community/licensing/ title=Licensing class=dd-item><a href=/docs/community/licensing/>Licensing</a></li></ul></li></ul><section id=shortcuts><h3>Community</h3><ul><li><a class=padding href=https://nymtech.net><i class="fas fa-fw fa-bullhorn"></i> Website</a></li><li><a class=padding href=https://medium.com/nymtech><i class="fab fa-fw fa-medium"></i> Blog</a></li><li><a class=padding href=https://github.com/nymtech/><i class="fab fa-fw fa-github"></i> Github</a></li><li><a class=padding href=https://nymtech.net/docs/overview/links/><i class="fas fa-fw fa-key"></i> Developer Chat</a></li><li><a class=padding href=https://twitter.com/nymproject/><i class="fab fa-fw fa-twitter"></i> Twitter</a></li><li><a class=padding href=https://t.me/nymchan><i class="fab fa-fw fa-telegram"></i> Telegram</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/docs/>Nym</a> > <a href=/docs/build-apps/>Build Apps</a> > Webassembly client</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#building-apps-with-nym-client-wasm>Building apps with nym-client-wasm</a><ul><li><a href=#initializing-a-new-nym-identity>Initializing a new Nym identity</a></li><li><a href=#constructing-a-nym-client>Constructing a Nym client</a></li><li><a href=#running-the-nym-client>Running the Nym client</a></li><li><a href=#sending-messages>Sending messages</a></li><li><a href=#getting-the-clients-address>Getting the client&rsquo;s address</a></li><li><a href=#surbs>SURBs</a></li><li><a href=#json>JSON</a></li><li><a href=#think-about-what-youre-sending>Think about what you&rsquo;re sending!</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Webassembly client</h1><p>The Nym webassembly client allows any webassembly-capable runtime to build and send Sphinx packets to the Nym network.</p><p>You can install <a href=https://www.npmjs.com/package/@nymproject/nym-client-wasm>@nymproject/nym-client-wasm</a> from NPM from its package page, or</p><pre><code>npm i @nymproject/nym-client-wasm
</code></pre><p>The <code>nym-client-wasm</code> package allows easy creation of Sphinx packets from within mobile apps and browser-based client-side apps (including Electron or similar). Browser extensions should also work.</p><p>The webassembly client lets you deliver web apps that build and send Sphinx packets solely in a web browser window. However, note that all the normal constraints of <a href=https://pomcor.com/2017/06/02/keys-in-browser/>browser-based key storage</a> and same-origin rules (which are there for good reason) make it difficult to structure pure webapps apps securely. We are still assessing what can be done here.</p><h2 id=building-apps-with-nym-client-wasm>Building apps with nym-client-wasm</h2><p>There are two example applications located in the directory <code>clients/webassembly</code> in the main Nym platform codebase. The <code>js-example</code> is a simple, bare-bones JavaScript app. The <code>react-example</code> is a nicer-looking chat app done in React and Typescript.</p><h3 id=initializing-a-new-nym-identity>Initializing a new Nym identity</h3><p>The main methods you&rsquo;ll use from the NPM package are:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>identity</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Identity</span>();
</code></pre></div><p>This generates a new Nym identity, consisting of a public/private keypair and a Nym gateway address.</p><h3 id=constructing-a-nym-client>Constructing a Nym client</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>client</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Client</span>(<span style=color:#a6e22e>directoryUrl</span>, <span style=color:#a6e22e>identity</span>, <span style=color:#a6e22e>authToken</span>);
</code></pre></div><p>This returns a nym Client which connects to a Nym gateway via websocket. All communication with the Nym network happens through this client.</p><p>The <code>directoryUrl</code> of the Nym testnet is <code>http://testnet-validator1.nymtech.net:8081</code>. Use that if you want to connect to the running testnet.</p><h3 id=running-the-nym-client>Running the Nym client</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>start</span>();
</code></pre></div><p>This will cause the client to retrieve a network topology from the defined <code>directoryUrl</code>, and connect to its gateway via websocket. Cover traffic is not yet sent, but message sends should work after client start.</p><h3 id=sending-messages>Sending messages</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>sendMessage</span>(<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>recipient</span>) {
</code></pre></div><p>Sends a message up the websocket to this client&rsquo;s Nym gateway.</p><p>NOTE: the webassembly client currently does not implement chunking. Messages over ~1KB will cause a panic. This will be fixed in a future version.</p><p><code>message</code> must be a string at the moment. Binary <code>Blob</code> and <code>ArrayBuffer</code>
will be supported soon.</p><p><code>recipient</code> is a Nym address as a string.</p><h3 id=getting-the-clients-address>Getting the client&rsquo;s address</h3><p>Given a client, to get its address, you can call:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>formatAsRecipient</span>();
</code></pre></div><h3 id=surbs>SURBs</h3><p>Anonymous replies using surbs don&rsquo;t yet work in the webassembly client. They should be available in the next release (0.11.0).</p><h3 id=json>JSON</h3><p>Sending JSON is fairly simple. If you&rsquo;re playing with the wasm example app, just stick it into the message box and send it (or send it programmatically as the <code>message</code> content of <code>client.sendMessage(message, recipient)</code> in your own application code.</p><h3 id=think-about-what-youre-sending>Think about what you&rsquo;re sending!</h3><div class="notices warning"><p>Think about what information your app sends. That goes for whatever you put into your Sphinx packet messages as well as what your app&rsquo;s environment may leak.</p></div><p>Whenever you write client peaps using HTML/JavaScript, we recommend that you do not load external resources from CDNs. Webapp developers do this all the time, to save load time for common resources, or just for convenience. But when you&rsquo;re writing privacy apps it&rsquo;s better not to make these kinds of requests. Pack everything locally.</p><p>If you use only local resources within your Electron app or your browser extensions, explicitly encoding request data in a Sphinx packet does protect you from the normal leakage that gets sent in a browser HTTP request. <a href=https://panopticlick.eff.org/>There&rsquo;s a lot of stuff that leaks when you make an HTTP request from a browser window</a>. Luckily, all that metadata and request leakage doesn&rsquo;t happen in Nym, because you&rsquo;re choosing very explicitly what to encode into Sphinx packets, instead of sending a whole browser environment by default.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/docs/build-apps/websocket-client/ title="Websocket client"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/docs/build-apps/demos/ title=Demos style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/docs/js/clipboard.min.js?1620933932></script><script src=/docs/js/perfect-scrollbar.min.js?1620933932></script><script src=/docs/js/perfect-scrollbar.jquery.min.js?1620933932></script><script src=/docs/js/jquery.sticky.js?1620933932></script><script src=/docs/js/featherlight.min.js?1620933932></script><script src=/docs/js/highlight.pack.js?1620933932></script><script>hljs.initHighlightingOnLoad()</script><script src=/docs/js/modernizr.custom-3.6.0.js?1620933932></script><script src=/docs/js/learn.js?1620933932></script><script src=/docs/js/hugo-learn.js?1620933932></script><link href=/docs/mermaid/mermaid.css?1620933932 rel=stylesheet><script src=/docs/mermaid/mermaid.js?1620933932></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>