<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><meta name=description content="How to run the Nym websocket client on a desktop or server machine."><meta name=author content="Nym Team"><link rel=icon href=/docs/images/favicon.png type=image/png><title>Websocket client :: Nym Docs</title><link href=/docs/css/nucleus.css?1620933932 rel=stylesheet><link href=/docs/css/fontawesome-all.min.css?1620933932 rel=stylesheet><link href=/docs/css/hybrid.css?1620933932 rel=stylesheet><link href=/docs/css/featherlight.min.css?1620933932 rel=stylesheet><link href=/docs/css/perfect-scrollbar.min.css?1620933932 rel=stylesheet><link href=/docs/css/auto-complete.css?1620933932 rel=stylesheet><link href=/docs/css/atom-one-dark-reasonable.css?1620933932 rel=stylesheet><link href=/docs/css/theme.css?1620933932 rel=stylesheet><link href=/docs/css/hugo-theme.css?1620933932 rel=stylesheet><link href=/docs/css/theme-green.css?1620933932 rel=stylesheet><script src=/docs/js/jquery-3.3.1.min.js?1620933932></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=/docs/build-apps/websocket-client/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/docs><img width=40px height=10px src=/docs/images/nym-logo.svg alt="Nym Logo"></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/docs/js/lunr.min.js?1620933932></script><script type=text/javascript src=/docs/js/auto-complete.js?1620933932></script><script type=text/javascript>var baseurl="https://nymtech.net/docs/"</script><script type=text/javascript src=/docs/js/search.js?1620933932></script></div><div class=highlightable><ul class=topics><li data-nav-id=/docs/overview/ title=Overview class=dd-item><a href=/docs/overview/>Overview</a><ul><li data-nav-id=/docs/overview/nym-platform/ title="The Nym Platform" class=dd-item><a href=/docs/overview/nym-platform/>The Nym Platform</a></li><li data-nav-id=/docs/overview/network-privacy/ title="Network Privacy" class=dd-item><a href=/docs/overview/network-privacy/>Network Privacy</a></li><li data-nav-id=/docs/overview/private-access-control/ title=Coconut class=dd-item><a href=/docs/overview/private-access-control/>Coconut</a></li><li data-nav-id=/docs/overview/links/ title=Links class=dd-item><a href=/docs/overview/links/>Links</a></li></ul></li><li data-nav-id=/docs/run-nym-nodes/ title="Run Nym Nodes" class=dd-item><a href=/docs/run-nym-nodes/>Run Nym Nodes</a><ul><li data-nav-id=/docs/run-nym-nodes/incentives/ title=Incentives class=dd-item><a href=/docs/run-nym-nodes/incentives/>Incentives</a></li><li data-nav-id=/docs/run-nym-nodes/build-nym/ title="Building Nym" class=dd-item><a href=/docs/run-nym-nodes/build-nym/>Building Nym</a></li><li data-nav-id=/docs/run-nym-nodes/mixnodes/ title=Mixnodes class=dd-item><a href=/docs/run-nym-nodes/mixnodes/>Mixnodes</a></li><li data-nav-id=/docs/run-nym-nodes/validators/ title=Validators class=dd-item><a href=/docs/run-nym-nodes/validators/>Validators</a></li><li data-nav-id=/docs/run-nym-nodes/requester/ title=Requesters class=dd-item><a href=/docs/run-nym-nodes/requester/>Requesters</a></li><li data-nav-id=/docs/run-nym-nodes/gateways/ title=Gateways class=dd-item><a href=/docs/run-nym-nodes/gateways/>Gateways</a></li><li data-nav-id=/docs/run-nym-nodes/troubleshooting/ title="Mixnode Troubleshooting FAQ" class=dd-item><a href=/docs/run-nym-nodes/troubleshooting/>Mixnode Troubleshooting FAQ</a></li></ul></li><li data-nav-id=/docs/use-apps/ title="Use Apps" class=dd-item><a href=/docs/use-apps/>Use Apps</a><ul><li data-nav-id=/docs/use-apps/blockstream-green/ title="Blockstream Green" class=dd-item><a href=/docs/use-apps/blockstream-green/>Blockstream Green</a></li><li data-nav-id=/docs/use-apps/electrum/ title=Electrum class=dd-item><a href=/docs/use-apps/electrum/>Electrum</a></li><li data-nav-id=/docs/use-apps/keybase/ title=KeyBase class=dd-item><a href=/docs/use-apps/keybase/>KeyBase</a></li></ul></li><li data-nav-id=/docs/build-apps/ title="Build Apps" class="dd-item
parent"><a href=/docs/build-apps/>Build Apps</a><ul><li data-nav-id=/docs/build-apps/choose-a-client/ title="Choose a client" class=dd-item><a href=/docs/build-apps/choose-a-client/>Choose a client</a></li><li data-nav-id=/docs/build-apps/websocket-client/ title="Websocket client" class="dd-item active"><a href=/docs/build-apps/websocket-client/>Websocket client</a></li><li data-nav-id=/docs/build-apps/wasm-client/ title="Webassembly client" class=dd-item><a href=/docs/build-apps/wasm-client/>Webassembly client</a></li><li data-nav-id=/docs/build-apps/demos/ title=Demos class=dd-item><a href=/docs/build-apps/demos/>Demos</a></li></ul></li><li data-nav-id=/docs/community/ title=Community class=dd-item><a href=/docs/community/>Community</a><ul><li data-nav-id=/docs/community/code-of-conduct/ title="Code of Conduct" class=dd-item><a href=/docs/community/code-of-conduct/>Code of Conduct</a></li><li data-nav-id=/docs/community/licensing/ title=Licensing class=dd-item><a href=/docs/community/licensing/>Licensing</a></li></ul></li></ul><section id=shortcuts><h3>Community</h3><ul><li><a class=padding href=https://nymtech.net><i class="fas fa-fw fa-bullhorn"></i> Website</a></li><li><a class=padding href=https://medium.com/nymtech><i class="fab fa-fw fa-medium"></i> Blog</a></li><li><a class=padding href=https://github.com/nymtech/><i class="fab fa-fw fa-github"></i> Github</a></li><li><a class=padding href=https://nymtech.net/docs/overview/links/><i class="fas fa-fw fa-key"></i> Developer Chat</a></li><li><a class=padding href=https://twitter.com/nymproject/><i class="fab fa-fw fa-twitter"></i> Twitter</a></li><li><a class=padding href=https://t.me/nymchan><i class="fab fa-fw fa-telegram"></i> Telegram</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/docs/>Nym</a> > <a href=/docs/build-apps/>Build Apps</a> > Websocket client</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#initializing-a-new-client-instance>Initializing a new client instance</a></li><li><a href=#running-the-native-client>Running the native client</a><ul><li><a href=#connecting-to-the-local-websocket>Connecting to the local websocket</a></li></ul></li><li><a href=#a-simple-example-peap>A simple example peap</a></li><li><a href=#message-types>Message Types</a><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Websocket client</h1><div class="notices info"><p>The Nym Websocket Client was built in the <a href=/docs/run-nym-nodes/build-nym/>building nym</a> section. If you haven&rsquo;t yet built Nym and want to run the code on this page, go there first.</p></div><p>From inside the <code>nym</code> directory, the <code>nym-client</code> binary got built to the <code>./target/release/</code> directory. You can run it like this (or add it to your $PATH):</p><p><code>./nym-client</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ ./nym-client 


      _ __  _   _ _ __ ___
     | <span style=color:#e6db74>&#39;_ \| | | | &#39;</span>_ <span style=color:#ae81ff>\ </span>_ <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>     | | | | |_| | | | | | |
     |_| |_|<span style=color:#ae81ff>\_</span>_, |_| |_| |_|
            |___/

             <span style=color:#f92672>(</span>client - version 0.10.0<span style=color:#f92672>)</span>

    
usage: --help to see available options.
</code></pre></div><p>There are two commands you can issue to the client.</p><ol><li><code>init</code> - initialize a new client instance. Requires <code>--id clientname</code> parameter.</li><li><code>run</code> - run a mixnet client process. Requires <code>--id clientname</code> as a parameter</li></ol><h2 id=initializing-a-new-client-instance>Initializing a new client instance</h2><p>Before you can use the client, you need to initialize a new instance of it. Each instance of the client has its own public/private keypair, and connects to its own gateway node. Taken together, these 3 things (public/private keypair + gateway node) make up an app&rsquo;s identity.</p><p>Initializing a new client instance can be done with the following command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>./nym-client init --id alice
</code></pre></div><p>When you initialize a client instance, a configuration directory will be generated and stored in <code>$HOME_DIR/.nym/clients/&lt;client-name>/</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ tree ~/.nym/clients/alice/
/home/dave/.nym/clients/alice/
├── config
│   └── config.toml
└── data
    ├── private_identity.pem
    └── public_identity.pem
</code></pre></div><p>The file <code>config.toml</code> contains client configuration options, while the two <code>pem</code> files contain client key information.</p><p>Have a look at the generated files if you&rsquo;d like - they contain the client name, public/private keypairs, and gateway address. The name <code>alice</code> in the example above is just a local identifier so that you can name your clients; it is never transmitted over the network.</p><h2 id=running-the-native-client>Running the native client</h2><p>You can run the <code>alice</code> client by doing this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>./nym-client run --id alice
</code></pre></div><p>When you run the client, it immediately starts generating (fake) cover traffic and sending it to the Nym testnet.</p><div class="notices info"><p>Congratulations, you have just contributed a tiny bit of privacy to the world! <code>&lt;CTRL-C></code> to stop the client.</p></div><p>When the client is first started, it will reach out to the Nym network&rsquo;s validators, and get a list of available Nym nodes (gateways, mixnodes, and validators). We call this list of nodes the network <em>topology</em>. The client does this so that it knows how to connect, register itself with the network, and know which mixnodes it can route Sphinx packets through.</p><p>Once the client has obtained the network topology, it automatically sends a registration request to one of the first available gateway. The gateway returns a unique authentication token that the client attaches to every subsequent request to the gateway.</p><h3 id=connecting-to-the-local-websocket>Connecting to the local websocket</h3><p>The Nym native client exposes a websocket interface that your code connects to. To program your app, choose a websocket library for whatever language you&rsquo;re using. The default websocket port is <code>1977</code>, you can override that in the client config if you want.</p><h2 id=a-simple-example-peap>A simple example peap</h2><p>Let&rsquo;s write some code. Sometimes when you&rsquo;re learning something new it&rsquo;s easiest to see a short working example. Here&rsquo;s a simple app written in Python. This example is packaged with the Nym platform, dig around in the <code>python-examples</code> directory inside <code>clients/native</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> asyncio
<span style=color:#f92672>import</span> json
<span style=color:#f92672>import</span> websockets

self_address_request <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>dumps({
    <span style=color:#e6db74>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;selfAddress&#34;</span>
})

async <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>send_text</span>():
    message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Hello Nym!&#34;</span>

    uri <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ws://localhost:1977&#34;</span>
    async <span style=color:#66d9ef>with</span> websockets<span style=color:#f92672>.</span>connect(uri) <span style=color:#66d9ef>as</span> websocket: <span style=color:#75715e># 1</span>
        await websocket<span style=color:#f92672>.</span>send(self_address_request)
        self_address <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(await websocket<span style=color:#f92672>.</span>recv())
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;our address is: {}&#34;</span><span style=color:#f92672>.</span>format(self_address[<span style=color:#e6db74>&#34;address&#34;</span>]))

        text_send <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>dumps({ <span style=color:#75715e># 2 </span>
            <span style=color:#e6db74>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;send&#34;</span>,
            <span style=color:#e6db74>&#34;message&#34;</span>: message,
            <span style=color:#e6db74>&#34;recipient&#34;</span>: self_address[<span style=color:#e6db74>&#34;address&#34;</span>]
        })

        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;sending &#39;{}&#39; over the mix network...&#34;</span><span style=color:#f92672>.</span>format(message))
        await websocket<span style=color:#f92672>.</span>send(text_send) <span style=color:#75715e># 3</span>
        msg_send_confirmation <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(await websocket<span style=color:#f92672>.</span>recv()) <span style=color:#75715e># 4</span>
        <span style=color:#66d9ef>assert</span> msg_send_confirmation[<span style=color:#e6db74>&#34;type&#34;</span>], <span style=color:#e6db74>&#34;send&#34;</span>

        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;waiting to receive a message from the mix network...&#34;</span>)
        received_message <span style=color:#f92672>=</span> await websocket<span style=color:#f92672>.</span>recv() <span style=color:#75715e># 5</span>
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;received {} from the mix network!&#34;</span><span style=color:#f92672>.</span>format(received_message))

asyncio<span style=color:#f92672>.</span>get_event_loop()<span style=color:#f92672>.</span>run_until_complete(send_text())
</code></pre></div><p>The Python code does the following.</p><ol><li>connects to the websocket on port 1977</li><li>formats a message to send. Nym messages have defined JSON formats.</li><li>sends the message into the websocket. The native client packages the message into a Sphinx packet and sends it to the mixnet</li><li>waits for confirmation that the message hit the native client</li><li>waits to receive messages from other Nym apps</li></ol><p>By varying the message content, you can easily build sophisticated Service Provider apps. For example, instead of <code>print("received {} from the mix network!".format(received_message))</code> your Service Provider might take some action on behalf of the user - perhaps initiating a network request, a blockchain transaction, or writing to a local data store.</p><h2 id=message-types>Message Types</h2><p>There are a small number of messages that your application sends up the websocket to interact with the native client, as follows.</p><h4 id=sending-text>Sending text</h4><p>If you want to send text information through the mixnet, format a message like this one and poke it into the websocket:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;send&#34;</span>,
  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;the message&#34;</span>,
  <span style=color:#f92672>&#34;recipient_address&#34;</span>: <span style=color:#e6db74>&#34;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&#34;</span>
}
</code></pre></div><p>In some applications, e.g. where people are chatting with friends who they know, you might want to include unencrypted reply information in the message field, like so:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;send&#34;</span>,
  <span style=color:#f92672>&#34;message&#34;</span>:
      {
        <span style=color:#f92672>&#34;sender&#34;</span>: <span style=color:#e6db74>&#34;198427b63ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&#34;</span>,
        <span style=color:#f92672>&#34;chatMessage&#34;</span>: <span style=color:#e6db74>&#34;hi julia!&#34;</span>
      },
  <span style=color:#f92672>&#34;recipient_address&#34;</span>: <span style=color:#e6db74>&#34;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&#34;</span>
}
</code></pre></div><p>This provides an easy way for the receiving chat to then turn around and send a reply message:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;send&#34;</span>,
  <span style=color:#f92672>&#34;message&#34;</span>:
      {
        <span style=color:#f92672>&#34;sender&#34;</span>: <span style=color:#e6db74>&#34;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&#34;</span>,
        <span style=color:#f92672>&#34;chatMessage&#34;</span>: <span style=color:#e6db74>&#34;winston, so lovely to hear from you! shall we meet at the antiques shop?&#34;</span>
      },
  <span style=color:#f92672>&#34;recipient_address&#34;</span>: <span style=color:#e6db74>&#34;198427b63ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&#34;</span>
}
</code></pre></div><p>If that fits your security model, good. However, it may be the case that you want to send anonymous replies using Single Use Reply Blocks, or <em>surbs</em>. These will be available in the next version of Nym (0.11.0).</p><h4 id=sending-binary-data>Sending binary data</h4><p>You can also send bytes instead of JSON. A Python program to send a file <code>dummy_file</code> looks like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>async <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>send_file</span>():
    uri <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ws://localhost:1977&#34;</span>
    async <span style=color:#66d9ef>with</span> websockets<span style=color:#f92672>.</span>connect(uri) <span style=color:#66d9ef>as</span> websocket:
        await websocket<span style=color:#f92672>.</span>send(self_address_request)
        self_address <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(await websocket<span style=color:#f92672>.</span>recv())
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;our address is: {}&#34;</span><span style=color:#f92672>.</span>format(self_address[<span style=color:#e6db74>&#34;address&#34;</span>]))

        <span style=color:#75715e># We receive our address in string format of </span>
        <span style=color:#75715e># OUR_PUB_KEY @ OUR_GATE_PUB_KEY</span>
        <span style=color:#75715e>#</span>
        <span style=color:#75715e># Both keys are 32 bytes and we need to encode them as binary </span>
        <span style=color:#75715e># without the &#39;@&#39; sign</span>
        split_address <span style=color:#f92672>=</span> self_address[<span style=color:#e6db74>&#34;address&#34;</span>]<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#34;@&#34;</span>)
        bin_payload <span style=color:#f92672>=</span> bytearray(base58<span style=color:#f92672>.</span>b58decode(split_address[<span style=color:#ae81ff>0</span>]))
        bin_payload <span style=color:#f92672>+=</span> base58<span style=color:#f92672>.</span>b58decode(split_address[<span style=color:#ae81ff>1</span>])

        <span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#34;dummy_file&#34;</span>, <span style=color:#e6db74>&#34;rb&#34;</span>) <span style=color:#66d9ef>as</span> input_file:
            read_data <span style=color:#f92672>=</span> input_file<span style=color:#f92672>.</span>read()
            bin_payload <span style=color:#f92672>+=</span> read_data

        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;sending content of &#39;dummy_file&#39; over the mix network...&#34;</span>)
        await websocket<span style=color:#f92672>.</span>send(bin_payload)
        msg_send_confirmation <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(await websocket<span style=color:#f92672>.</span>recv())
        <span style=color:#66d9ef>assert</span> msg_send_confirmation[<span style=color:#e6db74>&#34;type&#34;</span>], <span style=color:#e6db74>&#34;send&#34;</span>

        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;waiting to receive the &#39;dummy_file&#39; from the mix network...&#34;</span>)
        received_data <span style=color:#f92672>=</span> await websocket<span style=color:#f92672>.</span>recv()
        <span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#34;received_file&#34;</span>, <span style=color:#e6db74>&#34;wb&#34;</span>) <span style=color:#66d9ef>as</span> output_file:
            <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;writing the file back to the disk!&#34;</span>)
            output_file<span style=color:#f92672>.</span>write(received_data)

asyncio<span style=color:#f92672>.</span>get_event_loop()<span style=color:#f92672>.</span>run_until_complete(send_file())
</code></pre></div><p>In order to send binary messages, you format a 64-byte binary array, with the first 32 bytes being the recipient pubkey, and the second 32 bytes being the destination gateway pubkey. The remainder of the payload is the bytes of the binary data you&rsquo;d like to send.</p><h4 id=receiving-messages>Receiving messages</h4><p>When another peap sends a message to you, all extraneous information is stripped and you just get the message. So if an app sends the following message:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;send&#34;</span>,
  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;2 + 2 = 4&#34;</span>,
  <span style=color:#f92672>&#34;recipient_address&#34;</span>: <span style=color:#e6db74>&#34;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&#34;</span>
}
</code></pre></div><p>The receiving user will get only <code>2 + 2 = 4</code>.</p><h4 id=getting-your-own-address>Getting your own address</h4><p>Sometimes, when you start your app, it can be convenient to ask the native client to tell you what your own address is (from the saved configuration files). To do this, send:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;selfAddress&#34;</span>
}
</code></pre></div><p>You&rsquo;ll get back:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;selfAddress&#34;</span>,
      <span style=color:#f92672>&#34;address&#34;</span>: <span style=color:#e6db74>&#34;the-address&#34;</span>
}

</code></pre></div><h4 id=error-messages>Error messages</h4><p>Errors from the app&rsquo;s client, or from the gateway, will be sent down the websocket to your code in the following format:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;error&#34;</span>, 
      <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;string message&#34;</span>
}
</code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/docs/build-apps/choose-a-client/ title="Choose a client"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/docs/build-apps/wasm-client/ title="Webassembly client" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/docs/js/clipboard.min.js?1620933932></script><script src=/docs/js/perfect-scrollbar.min.js?1620933932></script><script src=/docs/js/perfect-scrollbar.jquery.min.js?1620933932></script><script src=/docs/js/jquery.sticky.js?1620933932></script><script src=/docs/js/featherlight.min.js?1620933932></script><script src=/docs/js/highlight.pack.js?1620933932></script><script>hljs.initHighlightingOnLoad()</script><script src=/docs/js/modernizr.custom-3.6.0.js?1620933932></script><script src=/docs/js/learn.js?1620933932></script><script src=/docs/js/hugo-learn.js?1620933932></script><link href=/docs/mermaid/mermaid.css?1620933932 rel=stylesheet><script src=/docs/mermaid/mermaid.js?1620933932></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>